{% extends 'base.html' %}

{% block title %}Flights List{% endblock %}

{% block activeFlight %}active{% endblock %}

{% block content %}

<div class="container mt-4">
    <table class="table table-bordered bg-light">
        <thead class="thead-dark">
            <tr>
                <th>Origen</th>
                <th>Destino</th>
                <th>Imagen Destino</th>
                <th>Salida</th>
                <th>Llegada</th>
                <th>Precio Base</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody>
            {% for flight in flights %}
            <tr>
                <td>{{flight.origin}}</td>
                <td>{{flight.destination}}</td>
                <td>
                    {% if flight.image %}
                        <img src="{{ flight.image.url }}" alt="{{ flight.origin }}" height="200">
                    {% else %}
                        <span class="text-muted">Sin imagen</span>
                    {% endif %}
                </td>
                <td>{{flight.departure_date}}</td>
                <td>{{flight.arrival_date}}</td>
                <td>${{flight.base_price}}</td>
                {% if user.is_superuser %}
                <td>
                    <a href="{% url 'flight_detail' flight.id %}" class="fa fa-eye" aria-hidden="true"> Ver </a>
                    <a href="{% url 'flight_update' flight.id %}" class="fa fa-eye" aria-hidden="true"> Editar </a>
                    <a href="{% url 'flight_delete' flight.id %}" class="fa fa-trash" aria-hidden="true"> Borrar </a>
                </td>
                {% else %}
                <td>
                    <a href="{% url 'login' %}" class="fa fa-eye" aria-hidden="true"> Ingresar </a>
                    <p>(Debe ingresar como administrador para esta funcionalidad)</p>
                </td>
                {% endif %}
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% if user.is_superuser %}
        <a href="{% url 'flight_create' %}" class="btn btn-info">Crear Vuelo</a>
    {% else %}
        <p><a href="{ url 'login' }" class="fa fa-eye">Iniciar Sesion</a> para la creacion de Vuelos</p>
    {% endif %}
</div>

{% endblock %}
